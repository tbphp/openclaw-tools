---
name: surge-control
description: ç®¡ç† Surge ä»£ç†å®¢æˆ·ç«¯ã€‚å½“ç”¨æˆ·æåˆ° Surgeã€ä»£ç†ã€èŠ‚ç‚¹åˆ‡æ¢ã€ç­–ç•¥ç»„ã€VPN çº¿è·¯ã€åˆ‡æ¢åˆ°æŸä¸ªå›½å®¶/åœ°åŒºç­‰å…³é”®è¯æ—¶ä½¿ç”¨æ­¤æŠ€èƒ½ã€‚
user-invocable: false
disable-model-invocation: false
---

# Surge ä»£ç†ç®¡ç†ï¼ˆåŠ¨æ€è·å–ï¼‰

## API ä¿¡æ¯
- åœ°å€: `https://127.0.0.1:6171`
- è®¤è¯: Header `X-Key: 1236`
- TLS: è‡ªç­¾åè¯ä¹¦ï¼Œcurl éœ€è¦ `-k`

## æ ¸å¿ƒåŸåˆ™
- **Shell å®‰å…¨**ï¼šåœ¨æ‰§è¡Œ curl å‘½ä»¤æ—¶ï¼Œæ‰€æœ‰çš„ URL å¿…é¡»ä½¿ç”¨åŒå¼•å·åŒ…è£¹ï¼Œä»¥é˜²æ­¢ Zsh/Bash å°† `?`ã€`&` ç­‰å­—ç¬¦è§£æä¸ºé€šé…ç¬¦ã€‚
- æ¯æ¬¡æ¶‰åŠç­–ç•¥ç»„/èŠ‚ç‚¹åŒ¹é…æ—¶ï¼Œéƒ½å…ˆè¯·æ±‚ï¼š
  `GET /v1/policy_groups`
- æ°¸è¿œç”¨ API è¿”å›çš„çœŸå®ç»„å/èŠ‚ç‚¹åæ‰§è¡Œåˆ‡æ¢ã€‚
- ä¸å†™æ­»ç­–ç•¥ç»„å’ŒèŠ‚ç‚¹åã€‚

## å¸¸ç”¨æ“ä½œæµç¨‹

### 1. æŸ¥è¯¢æ‰€æœ‰ç­–ç•¥ç»„ä¸å¯é€‰é¡¹
```bash
curl -sk "https://127.0.0.1:6171/v1/policy_groups" -H "X-Key: 1236"
```

### 2. åˆ‡æ¢ç­–ç•¥ç»„èŠ‚ç‚¹
1. åœ¨ç¬¬ 1 æ­¥è¿”å›çš„ JSON ä¸­åŒ¹é…ç”¨æˆ·æ„å›¾ï¼ˆå¦‚ ai -> AIï¼Œé¦™æ¸¯ -> ğŸ‡­ğŸ‡° é¦™æ¸¯ï¼‰ã€‚
2. è°ƒç”¨åˆ‡æ¢ï¼š
```bash
curl -sk -X POST "https://127.0.0.1:6171/v1/policy_groups/select" \
  -H "X-Key: 1236" \
  -H "Content-Type: application/json" \
  -d '{"group_name":"<ç²¾ç¡®ç»„å>","policy":"<ç²¾ç¡®èŠ‚ç‚¹å>"}'
```

### 3. æŸ¥è¯¢ç‰¹å®šç­–ç•¥ç»„å½“å‰é€‰æ‹©
```bash
curl -sk "https://127.0.0.1:6171/v1/policy_groups/select?group_name=<ç²¾ç¡®ç»„å>" -H "X-Key: 1236"
```

## å…¶ä»–æ¥å£
- è·å–å‡ºç«™æ¨¡å¼ï¼š`curl -sk "https://127.0.0.1:6171/v1/outbound" -H "X-Key: 1236"`
- è®¾ç½®å‡ºç«™æ¨¡å¼ï¼š`curl -sk -X POST "https://127.0.0.1:6171/v1/outbound" -H "X-Key: 1236" -d '{"mode":"rule"}'` (å¯ç”¨æ¨¡å¼: direct, proxy, rule)
- é‡è½½é…ç½®ï¼š`curl -sk -X POST "https://127.0.0.1:6171/v1/profiles/reload" -H "X-Key: 1236"`
- åˆ·æ–° DNSï¼š`curl -sk -X POST "https://127.0.0.1:6171/v1/dns/flush" -H "X-Key: 1236"`
- ç­–ç•¥ç»„æµ‹é€Ÿï¼š`curl -sk -X POST "https://127.0.0.1:6171/v1/policy_groups/test" -H "X-Key: 1236" -d '{"group_name":"<ç»„å>"}'`

## ç¦æ­¢äº‹é¡¹
- **ç¦æ­¢**ä¸åŠ åŒå¼•å·ç›´æ¥åœ¨ URL ä¸­ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ã€‚
- **ç¦æ­¢**ç›´æ¥æŠŠç”¨æˆ·åŸå§‹æ–‡æœ¬å½“ä½œ `group_name` / `policy`ã€‚
- **ç¦æ­¢**è·³è¿‡æŸ¥è¯¢æ­¥éª¤ç›´æ¥æ‰§è¡Œåˆ‡æ¢æ“ä½œã€‚
